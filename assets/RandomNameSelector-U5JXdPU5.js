import{u as T,r,j as e,L as $}from"./index-CUU7AGCI.js";function W(){const{t:l}=T(),[u,y]=r.useState(()=>localStorage.getItem("rns_inputText")||""),[f,v]=r.useState(()=>{const t=localStorage.getItem("rns_isSetupMode");return t!==null?JSON.parse(t):!0}),[s,h]=r.useState(()=>JSON.parse(localStorage.getItem("rns_items"))||[]),[x,_]=r.useState(()=>parseFloat(localStorage.getItem("rns_rotation"))||0),[b,p]=r.useState(!1),[i,d]=r.useState(()=>{const t=localStorage.getItem("rns_winner");return t!=="null"&&t?JSON.parse(t):null}),[o,g]=r.useState(()=>JSON.parse(localStorage.getItem("rns_disabledItems"))||[]);r.useEffect(()=>{localStorage.setItem("rns_inputText",u)},[u]),r.useEffect(()=>{localStorage.setItem("rns_isSetupMode",JSON.stringify(f))},[f]),r.useEffect(()=>{localStorage.setItem("rns_items",JSON.stringify(s))},[s]),r.useEffect(()=>{localStorage.setItem("rns_rotation",x)},[x]),r.useEffect(()=>{localStorage.setItem("rns_disabledItems",JSON.stringify(o))},[o]),r.useEffect(()=>{localStorage.setItem("rns_winner",JSON.stringify(i))},[i]);const S=["#727cf5","#0acf97","#fa5c7c","#ffbc00","#39afd1","#ff679b","#6b5eae","#fd7e14","#2c8ef8","#02a8b5"],k=()=>{const t=u.split(",").map(n=>n.trim()).filter(n=>n.length>0);if(t.length<2){alert(l("enter_min_names"));return}const a=t.map((n,c)=>({id:Date.now()+c,text:n,color:S[c%S.length]}));h(a),g([]),_(0),d(null),v(!1)},w=()=>{if(b||s.length<2)return;p(!0),d(null);const t=Math.floor(Math.random()*s.length),a=360/s.length;let c=270-(t*a+a/2);const m=x,N=1800,M=m%360;let j=c-M;for(;j<0;)j+=360;const R=m+N+j;_(R),setTimeout(()=>{d(s[t]),p(!1)},4050)},C=()=>{if(!i)return;g([...o,i]);const t=s.filter(a=>a.id!==i.id);h(t),d(null)},E=()=>{v(!0),h([]),g([]),d(null)},I=(t,a)=>{a?(g(o.filter(n=>n.id!==t.id)),h([...s,t])):(h(s.filter(n=>n.id!==t.id)),g([...o,t]))},J=()=>{if(s.length===0)return"";let t="conic-gradient(";const a=100/s.length;return s.forEach((n,c)=>{const m=c*a,N=(c+1)*a;t+=`${n.color} ${m}% ${N}%, `}),t.slice(0,-2)+")"},O=()=>{const t=360/s.length,a=t/2;return s.map((n,c)=>{const m=t*c+a;return e.jsx("div",{className:"segment-label",style:{transform:`rotate(${m}deg) translate(60px)`},children:n.text.length>12?n.text.substring(0,10)+"..":n.text},n.id)})};return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"page-title",children:l("random_name_selector")}),e.jsx($,{to:"/agile-tools",className:"btn btn-sm btn-outline-secondary",children:l("back_to_agile")})]})})}),e.jsx("div",{className:"row justify-content-center",children:f?e.jsx("div",{className:"col-lg-6 col-md-8",children:e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("label",{htmlFor:"names-setup",className:"form-label",children:l("enter_names_label")}),e.jsx("textarea",{id:"names-setup",className:"form-control mb-3",rows:"5",placeholder:l("enter_names_placeholder"),value:u,onChange:t=>y(t.target.value)}),e.jsx("button",{className:"btn btn-primary w-100",onClick:k,disabled:!u.trim(),children:l("create_wheel")})]})})}):e.jsx("div",{className:"col-lg-8",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-7 text-center mb-4",children:[e.jsxs("div",{className:"wheel-container mb-4",children:[e.jsx("div",{className:"wheel-pointer"}),e.jsx("div",{className:"wheel",style:{background:J(),transform:`rotate(${x}deg)`},children:O()})]}),i?e.jsxs("div",{className:"mt-4 animate__animated animate__bounceIn",children:[e.jsx("h5",{className:"text-muted",children:l("winner_title")}),e.jsx("h2",{className:"text-primary fw-bold display-4 mb-3",children:i.text}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-warning px-4",onClick:()=>{C(),w()},children:l("remove_spin_again")}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{d(null),p(!1)},children:l("keep_spin_again")})]})]}):e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-lg btn-success px-5",onClick:w,disabled:b||s.length<2,children:l(b?"spinning":"spin")}),e.jsx("button",{className:"btn btn-outline-danger",onClick:E,disabled:b,children:l("reset")})]})]}),e.jsxs("div",{className:"col-md-5",children:[e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-0",children:e.jsx("h5",{className:"mb-0 text-muted",children:l("active_names",{count:s.length})})}),e.jsx("div",{className:"card-body p-0",style:{maxHeight:"200px",overflowY:"auto"},children:e.jsx("ul",{className:"list-group list-group-flush",children:s.map(t=>e.jsxs("li",{className:"list-group-item d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"d-inline-block rounded-circle me-2",style:{width:12,height:12,backgroundColor:t.color}}),t.text]}),e.jsx("button",{className:"btn btn-sm btn-light text-muted",onClick:()=>I(t,!1),title:l("move_to_removed"),children:e.jsx("i",{className:"mdi mdi-arrow-down"})})]},t.id))})})]}),o.length>0&&e.jsxs("div",{className:"card border-0 shadow-sm mt-3",children:[e.jsx("div",{className:"card-header bg-white border-0",children:e.jsx("h5",{className:"mb-0 text-muted",children:l("selected_removed")})}),e.jsx("div",{className:"card-body p-0",children:e.jsx("ul",{className:"list-group list-group-flush",children:o.map(t=>e.jsxs("li",{className:"list-group-item d-flex align-items-center justify-content-between text-muted",children:[e.jsx("span",{className:"text-decoration-line-through",children:t.text}),e.jsx("button",{className:"btn btn-sm btn-light text-muted",onClick:()=>I(t,!0),title:l("move_to_active"),children:e.jsx("i",{className:"mdi mdi-arrow-up"})})]},t.id))})})]})]})]})})})]})}export{W as default};
